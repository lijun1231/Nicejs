(function(_){var root=this,lib={};return lib.drag=function(e,t){function n(e){var t,n,i={ex:e.x-s.x,ey:e.y-s.y};t={sx:i.ex/10,sy:i.ey/10},n=i.ex>i.ey,cancelAnimationFrame(r),o(t,e,n)}function o(e,n,i){return t?(i?bEnd=Math.abs(n.y-s.y)<Math.abs(e.sy):bEnd=Math.abs(n.x-s.x)<Math.abs(e.sx),bEnd?(s.x=n.x,s.y=n.y,c.style.left=s.x+"px",void(c.style.top=s.y+"px")):(s.x+=e.sx,s.y+=e.sy,c.style.left=s.x+"px",c.style.top=s.y+"px",void(r=requestAnimationFrame(function(){return o(e,n,i)})))):(s.x=n.x,s.y=n.y,c.style.left=s.x+"px",void(c.style.top=s.y+"px"))}function i(e){if(!l)if(t)l=setTimeout(function(){var t=e||window.event,o=t.touches[0];posTouch={x:o.clientX-a.w,y:o.clientY-a.h},requestAnimationFrame(function(){return n(posTouch)}),clearTimeout(l),l=void 0},80);else{var o=e||window.event,i=o.touches[0];posTouch={x:i.clientX-a.w,y:i.clientY-a.h},n(posTouch)}}var r,c="string"==typeof e?document.querySelector(e):e,a={w:~~(c.offsetWidth/2),h:~~(c.offsetHeight/2)},s={x:parseInt(c.offsetLeft),y:parseInt(c.offsetTop)};c.addEventListener("touchstart",function(){c.removeEventListener("touchmove",i,!1)},!1),c.addEventListener("touchend",function(){c.removeEventListener("touchmove",i,!1)},!1);var l},lib.econt={},lib.dcont=[],lib.dcont=[],lib.etype={tap:{name:"tap",custom:new CustomEvent("tap",{detail:{message:"hallo eventï¼",time:new Date},bubbles:!1,cancelable:!0}),dispatch:function(e){var t=this,n={};n.fnSt=function(t){n.isCli=!0,e.addEventListener("touchmove",n.fnMv,!1),e.addEventListener("touchend",n.fnEd,!1)},e.addEventListener("touchstart",n.fnSt,!1),n.fnMv=function(e){n.isCli=!1},n.fnEd=function(o){e.removeEventListener("touchmove",n.fnMv,!1),e.removeEventListener("touchend",n.fnEd,!1),n.isCli&&e.dispatchEvent(t.custom)}}}},lib.evStack=function(e,t,n){var o=Nice.dcont.getIndex(e);if(o===-1){var i=Nice.createRandomAlphaNum(8),r=Nice.econt[i]={el:e,arr:[]};r.arr.push({type:t,fn:n}),Nice.dcont.push(e)}else!function(e){e.arr.push({type:t,fn:n})}(function(e){for(var t in Nice.econt){var n=Nice.econt[t];if(n.el===e)return n}}(e))},lib.on=function(e,t,n){var o=Nice.etype[t];o&&o.dispatch(e),e.addEventListener(t,n,!1),Nice.evStack(e,t,n)},lib.delegate=function(e,t,n){var o=Nice.etype[t];o&&o.dispatch(document),document.addEventListener(t,function(e){e||window.event||arguments.callee.caller.arguments[0]},!1)},lib.off=function(e,t,n){!function(e){var o=e.tt;if(t)for(var i=0;i<o.arr.length;i++){var r=o.arr[i];r.type===t&&(n&&n===r.fn?o.el.removeEventListener(t,r.fn):o.el.removeEventListener(t,r.fn),o.arr.splice(i,1))}else for(var i=0;i<o.arr.length;i++){var r=o.arr[i];o.el.removeEventListener(r.type,r.fn)}0===o.arr.length&&delete o.arr,o.arr&&0!==o.arr.length||(Nice.dcont.splice(e.ind,1),delete Nice.econt[e.id],o=null)}(function(e){for(var t in Nice.econt){var n=Nice.econt[t];if(n.el===e)return{tt:n,id:t,ind:Nice.dcont.getIndex(n.el)}}}(e))},lib.preloadImage=function(e,t){var n=new Image;n.src=e,n.onload=function(){t&&t()}},lib.preloadMedia=function(e,t,n){var o;switch(e){case"audio":o=new Audio(t);break;case"vedio":o=new video(t)}o.onload=function(){n&&n()}},lib.getUrlval=function(e){var t=location.search,n=new Object;if(t.indexOf("?")!=-1){var o=t.substr(1);strs=o.split("&");for(var i=0;i<strs.length;i++)n[strs[i].split("=")[0]]=strs[i].split("=")[1]}return n[e]},lib.getCookie=function(e){return document.cookie.length>0&&(c_start=document.cookie.indexOf(e+"="),c_start!=-1)?(c_start=c_start+e.length+1,c_end=document.cookie.indexOf(";",c_start),c_end==-1&&(c_end=document.cookie.length),unescape(document.cookie.substring(c_start,c_end))):""},lib.setCookie=function(e,t,n){var o=new Date;o.setDate(o.getDate()+n),document.cookie=e+"="+escape(t)+(null==n?"":";expires="+o.toGMTString())+";path=/"},lib.clearCookie=function(e){setCookie(e,"",-1)},lib.clearAllCookies=function(){var e=document.cookie.match(/[^ =;]+(?=\=)/g);if(e)for(var t=e.length;t--;)document.cookie=e[t]+"=0;expires="+new Date(0).toUTCString()},lib.isEmail=function(e){var t=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/;return t.test(e)},lib.checkPhone=function(e){return!!/^(\d{3,4}\-)?\d{7,8}$/i.test(e)||(!!/^0(([1-9]\d)|([3-9]\d{2}))\d{8}$/.test(e)||!!/^(400)\d{7}$/.test(e))},lib.checkMobile=function(e){return!!/^1[3|4|5|8|7][0-9]\d{8}$/.test(e)},lib.checkIDCard=function(e){var t=/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/;return t.test(e)!==!1},lib.checkName=function(e,t){if(t)var n=/^([\u4e00-\u9fa5]+|([a-zA-Z]+\s?)+)$/;else var n=/^([\u4e00-\u9fa5]{2,}|([a-zA-Z]+\s?){2,})$/;return n.test(e)!==!1},lib.checkCarPlate=function(e){var t=/(^[a-zA-Z]{1}(\d|[a-zA-Z]){5}$)/;return t.test(e)!==!1},lib.checkLimitCode=function(str,type,min,max,arr){var t=arr?arr.join(""):"";switch(type){case"letter":t="a-zA-Z"+t;break;case"num":t="0-9"+t;break;case"code":t="0-9a-zA-Z"+t}var reg=eval("/(^["+t+"]{"+(min?min:0)+","+(max?max:6)+"}$)/");return reg.test(str)},lib.getElementLeft=function(e){for(var t=e.offsetLeft,n=e.offsetParent;null!==n;)t+=n.offsetLeft,n=n.offsetParent;return t},lib.getElementTop=function(e){for(var t=e.offsetTop,n=e.offsetParent;null!==n;)t+=n.offsetTop,n=n.offsetParent;return t},lib.isPageEnd=function(){return!!(oDocinfo&&oDocinfo.st+oDocinfo.ch+1>oDocinfo.sh)},lib.responsiveScaling=function(){var e=window.screen.availWidth||window.screen.width,t=e/23;t=t>18?18:t,(document.documentElement||document.body.parentNode).style.fontSize=t+"px",document.body.style.fontSize=t+"px"},lib.getLocalTime=function(e,t,n){var t=t||".",o=new Date(1e3*parseInt(e)),i=o.getMonth()+1;i=(i+"").length<2?"0"+i:i;var r=o.getDate();r=(r+"").length<2?"0"+r:r;var n=n!==!1||n,c=o.getHours().toString();c=2==c.length?c:"0"+c;var a=o.getMinutes().toString();a=2==a.length?a:"0"+a;var s=o.getSeconds().toString();return s=2==s.length?s:"0"+s,n?o.getFullYear()+t+i+t+r+" "+c+":"+a+":"+s:o.getFullYear()+t+i+t+r},_.extendPrototype(Array,{indexOf:function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1}}),_.extendPrototype(String,{trim:function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}}),_.extendPrototype("dom",{getRect:function(){var e=element.getBoundingClientRect(),t=e.top,n=e.right,o=e.bottom,i=e.left,r=e.width||n-i,c=e.height||o-t;return{top:t,left:i,right:n,bottom:o,width:r,height:c}}}),"undefined"!=typeof exports?"undefined"!=typeof module?exports=module.exports=lib:exports.lib=lib:(root.Nice||(root.Nice=new Function),root._lib=root.Nice.lib=lib),_lib}).call(this,Nice);